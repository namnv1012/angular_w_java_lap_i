<div class="sy position-absolute">
  <div class="sy-heading">
    <span class="sy-heading-text">{{'MENU.SCHOOL.UPDATE_INFO' | translate}} </span>
  </div>
  <form class="form form-change-custom" [formGroup]="schoolForm" (ngSubmit)="onSubmit()">
    <div class="row content-account-form ">
      <div class="col-md-2 col-sm-12 text-center ">
        <!-- Form starts -->
        <div class="group-gap">
          <!-- Upload image -->
          <div class="avatar-upload">
            <div class="avatar-edit">
              <!--accept=".png, .jpg, .jpeg"-->
              <input type='file' id="imageUpload" accept=".jpg, .png, .bmp, .tiff,.tif,.jpeg" #fileInput
                     (change)="uploadFile($event)"/>
            </div>
            <div class="avatar-preview m-auto">
              <div id="imagePreview1" *ngIf="!defaultUrl" [style.backgroundImage]="'url('+ imageUrl +')'">
              </div>
              <div id="imagePreview2" *ngIf="defaultUrl"
                   [style.backgroundImage]="'url(../../../../../assets/media/img/image_photo.png)'">
              </div>
            </div>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="overSize">
              {{'COMMON.VALIDATE_FILE' | translate}}
            </span>
          </div>
        </div>
        <button type="button" [disabled]="!isEdit" class="btn btn-primary btn-upload" (click)="fileInput.click()">
          <svg width="104" height="32" viewBox="0 0 104 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="104" height="32" rx="4" fill="#3366FF"/>
            <path
              d="M23.6987 17.5628L22.2925 15.4534C22.162 15.2577 21.8379 15.2577 21.7074 15.4534L20.3012 17.5628C20.2294 17.6706 20.2226 17.8093 20.2837 17.9236C20.3448 18.038 20.4639 18.1094 20.5937 18.1094H20.9452V20.5703C20.9452 20.7646 21.1025 20.9219 21.2968 20.9219H22.7031C22.8974 20.9219 23.0546 20.7646 23.0546 20.5703V18.1094H23.4062C23.536 18.1094 23.6551 18.038 23.7162 17.9236C23.7773 17.8093 23.7704 17.6706 23.6987 17.5628Z"
              fill="white"/>
            <path
              d="M26.206 14.1118C26.1751 13.6917 26.0045 13.2997 25.7041 12.9993C25.2498 12.545 24.5659 12.4092 23.9651 12.5769C23.3874 11.648 22.3936 11.0781 21.2969 11.0781C19.6482 11.0781 18.2904 12.3453 18.1486 13.9864C16.9185 14.2971 16 15.4174 16 16.7031C16 18.2539 17.2852 19.5156 18.8359 19.5156H20.2422V18.7524C19.9977 18.6663 19.79 18.4915 19.6637 18.255C19.48 17.912 19.5003 17.4972 19.7159 17.1732L21.1225 15.0634C21.3144 14.7754 21.6426 14.6037 22 14.6037C22.3574 14.6037 22.6856 14.7754 22.8775 15.0634L24.2838 17.1728C24.4997 17.4972 24.52 17.912 24.3363 18.255C24.21 18.4915 24.0023 18.6663 23.7578 18.7524V19.5156H25.1641C26.7148 19.5156 28 18.2539 28 16.7031C28 15.5429 27.2722 14.5365 26.206 14.1118Z"
              fill="white"/>
            <path
              d="M44.4501 14.2173C44.1816 12.2784 42.6902 11.1534 40.7555 11.1534C38.4757 11.1534 36.7583 12.8153 36.7583 15.6364C36.7583 18.4531 38.4544 20.1193 40.7555 20.1193C42.8308 20.1193 44.2072 18.777 44.4501 17.1108L42.8564 17.1023C42.6561 18.125 41.8208 18.7003 40.7768 18.7003C39.362 18.7003 38.3478 17.6392 38.3478 15.6364C38.3478 13.6676 39.3535 12.5724 40.7811 12.5724C41.8422 12.5724 42.6731 13.1733 42.8564 14.2173H44.4501ZM47.3723 16.1648C47.3723 15.2188 47.9604 14.6733 48.7871 14.6733C49.5968 14.6733 50.074 15.1889 50.074 16.071V20H51.6167V15.8324C51.6167 14.2514 50.7218 13.3693 49.3624 13.3693C48.3567 13.3693 47.7175 13.8253 47.415 14.5668H47.3382V11.2727H45.8297V20H47.3723V16.1648ZM56.0442 20.1278C57.9618 20.1278 59.1806 18.777 59.1806 16.7528C59.1806 14.7244 57.9618 13.3693 56.0442 13.3693C54.1266 13.3693 52.9078 14.7244 52.9078 16.7528C52.9078 18.777 54.1266 20.1278 56.0442 20.1278ZM56.0527 18.892C54.9917 18.892 54.4718 17.946 54.4718 16.7486C54.4718 15.5511 54.9917 14.5923 56.0527 14.5923C57.0968 14.5923 57.6167 15.5511 57.6167 16.7486C57.6167 17.946 57.0968 18.892 56.0527 18.892ZM56.0485 22.3523C56.5385 22.3523 56.9391 21.9773 56.9391 21.517C56.9391 21.0526 56.5385 20.6776 56.0485 20.6776C55.5542 20.6776 55.1536 21.0526 55.1536 21.517C55.1536 21.9773 55.5542 22.3523 56.0485 22.3523ZM62.0325 16.1648C62.0325 15.2188 62.6035 14.6733 63.4174 14.6733C64.2143 14.6733 64.6916 15.1974 64.6916 16.071V20H66.2342V15.8324C66.2385 14.2642 65.3436 13.3693 63.9927 13.3693C63.0126 13.3693 62.3393 13.8381 62.041 14.5668H61.9643V13.4545H60.4899V20H62.0325V16.1648ZM74.0943 13.4545H72.7349V12.9389C72.7349 12.4276 72.948 12.142 73.5233 12.142C73.7662 12.142 73.9707 12.1974 74.0985 12.2358L74.4096 11.0426C74.2093 10.9744 73.7704 10.8636 73.2377 10.8636C72.1 10.8636 71.1923 11.5156 71.1923 12.8366V13.4545H70.225V14.6477H71.1923V20H72.7349V14.6477H74.0943V13.4545ZM75.3024 20H76.845V13.4545H75.3024V20ZM76.0779 12.5256C76.568 12.5256 76.9686 12.1506 76.9686 11.6903C76.9686 11.2259 76.568 10.8509 76.0779 10.8509C75.5836 10.8509 75.1831 11.2259 75.1831 11.6903C75.1831 12.1506 75.5836 12.5256 76.0779 12.5256ZM79.9739 11.2727H78.4313V20H79.9739V11.2727ZM84.4579 20.1278C85.9835 20.1278 87.0318 19.3821 87.3045 18.2443L85.8642 18.0824C85.6554 18.6364 85.144 18.9261 84.4792 18.9261C83.4821 18.9261 82.8216 18.2699 82.8088 17.1491H87.3684V16.6761C87.3684 14.3793 85.9877 13.3693 84.377 13.3693C82.502 13.3693 81.2789 14.7457 81.2789 16.7656C81.2789 18.8196 82.4849 20.1278 84.4579 20.1278ZM82.813 16.1094C82.8599 15.2741 83.4778 14.571 84.3983 14.571C85.2846 14.571 85.8812 15.2188 85.8897 16.1094H82.813Z"
              fill="white"/>
          </svg>
        </button>
      </div>
      <div class="col-md-10 col-sm-12 col-auto pr-7">
        <div class="row">
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="code">
              {{'MENU.SCHOOL.SCHOOL_CODE' | translate}} <span>*</span>
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="code" ng
                   aria-describedby="code" [(ngModel)]="school.code" [disabled]="true" [readonly]="true"
                   [ngClass]="{'is-invalid': f.get('code').touched && f.get('code').invalid}"
                   id="code"
                   placeholder="{{'COMMON.ENTER' | translate}} {{'MENU.SCHOOL.SCHOOL_CODE' | translate| lowercase}}"/>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('code').errors?.required">
              {{'MENU.SCHOOL.SCHOOL_CODE' | translate}}{{'COMMON.NOT_BLANK' | translate}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="hotLine">
              {{'AUTH.INPUT.PHONE' | translate}}
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="hotLine" ng
                   aria-describedby="hotLine" [(ngModel)]="school.hotLine" [autofocus]="isEdit"
                   [ngClass]="{'is-invalid': f.get('hotLine').touched && f.get('hotLine').invalid}"
                   (blur)="onBlurEventRemoveAllSpace($event)"
                   id="hotLine" placeholder="{{'AUTH.INPUT.INPUT_PHONE' | translate}}"/>
            <span class="cross-validation-error-message alert error_div"
                  [ngClass]="{'is-invalid': f.get('hotLine').touched && f.get('hotLine').invalid}"
                  *ngIf="schoolForm.get('hotLine').errors?.maxlength">
              {{'AUTH.INPUT.PHONE' | translate}} {{'COMMON.MAX_LENGHT' | translate:'{length: 20}'}}
            </span>
            <span class="cross-validation-error-message alert error_div"
                  [ngClass]="{'is-invalid': f.get('hotLine').touched && f.get('hotLine').invalid}"
                  *ngIf="schoolForm.get('hotLine').errors?.pattern">
              {{'AUTH.VALIDATION.INVALID_PHONE' | translate}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="educationType">
              {{'MENU.SCHOOL.TYPE_EDU' | translate}}
            </label>
            <ng-select ng-disabled="true" formControlName="educationType" [items]="listSchoolType" [searchable]="false"
                       [clearable]="false" id="educationType"
                       bindLabel="name" bindValue="code" placeholder="{{'MENU.SCHOOL.TYPE_EDU' | translate}}"
                       [(ngModel)]="school.typeEducation"
            >
            </ng-select>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="name">
              {{'MENU.SCHOOL.SCHOOL_NAME' | translate}} <span>*</span>
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="name" ng
                   aria-describedby="name" [(ngModel)]="school.name" (blur)="onBlurEventTrim($event)"
                   [ngClass]="{'is-invalid': f.get('name').touched && f.get('name').invalid}"
                   id="name"
                   placeholder="{{'COMMON.ENTER' | translate}} {{'MENU.SCHOOL.SCHOOL_NAME' | translate| lowercase}}"/>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('name').errors?.required">
               {{'MENU.SCHOOL.SCHOOL_NAME' | translate}}{{'COMMON.NOT_BLANK' | translate}}
            </span>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('name').errors?.maxlength">
              {{'MENU.SCHOOL.SCHOOL_NAME' | translate}} {{'COMMON.MAX_LENGHT' | translate:'{length: 250}'}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="email">
              Email
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="email" ng
                   aria-describedby="email" placeholder="{{'COMMON.ENTER' | translate}} email"
                   [(ngModel)]="school.email"
                   [ngClass]="{'is-invalid': f.get('email').touched && f.get('email').invalid}"
                   (blur)="onBlurEventRemoveAllSpace($event)"
                   id="email"/>
            <span class="cross-validation-error-message alert error_div"
                  [ngClass]="{'is-invalid': f.get('email').touched && f.get('email').invalid}"
                  *ngIf="schoolForm.get('email').errors?.pattern">
              Email{{'COMMON.INVALIDATE' | translate}}
            </span>
            <span class="cross-validation-error-message alert error_div"
                  [ngClass]="{'is-invalid': f.get('email').touched && f.get('email').invalid}"
                  *ngIf="schoolForm.get('email').errors?.maxlength">
              Email {{'COMMON.MAX_LENGHT' | translate:'{length: 250}'}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="principal">
              {{'MENU.SCHOOL.PRINCIPAL' | translate}} <span>*</span>
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="principal" ng
                   aria-describedby="principal"
                   placeholder="{{'COMMON.ENTER' | translate}} {{'MENU.SCHOOL.PRINCIPAL' | translate| lowercase}}"
                   [(ngModel)]="school.principal" (blur)="onBlurEventTrim($event)"
                   [ngClass]="{'is-invalid': f.get('principal').touched && f.get('principal').invalid}"
                   id="principal"/>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('principal').errors?.required">
              {{'MENU.SCHOOL.PRINCIPAL' | translate}} {{'COMMON.NOT_BLANK' | translate}}
            </span>
            <span class="cross-validation-error-message alert error_div"
                  [ngClass]="{'is-invalid': f.get('principal').touched && f.get('principal').invalid}"
                  *ngIf="schoolForm.get('principal').errors?.maxlength">
               {{'MENU.SCHOOL.PRINCIPAL' | translate}} {{'COMMON.MAX_LENGHT' | translate:'{length: 250}'}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="abbreviationName">
              {{'MENU.SCHOOL.ABBREVIATIONS' | translate}} <span>*</span>
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="abbreviationName" ng
                   aria-describedby="abbreviationName"
                   placeholder="{{'COMMON.ENTER' | translate}} {{'MENU.SCHOOL.ABBREVIATIONS' | translate|lowercase}}"
                   [(ngModel)]="school.abbreviationName" (blur)="onBlurEventTrim($event)"
                   [ngClass]="{'is-invalid': f.get('abbreviationName').touched && f.get('abbreviationName').invalid}"
                   id="abbreviationName"/>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('abbreviationName').errors?.required">
              {{'MENU.SCHOOL.ABBREVIATIONS' | translate}} {{'COMMON.NOT_BLANK' | translate}}
            </span>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('abbreviationName').errors?.maxlength">
               {{'MENU.SCHOOL.ABBREVIATIONS' | translate}} {{'COMMON.MAX_LENGHT' | translate:'{length: 250}'}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="provinceId">
              {{'COMMON.PROVINCE_CITY' | translate}} <span>*</span>
            </label>
            <ng-select formControlName="provinceId" [items]="listProvince" [clearable]="false" id="provinceId"
                       bindLabel="prNameEn" bindValue="id" [(ngModel)]="school.provinceId"
                       (change)="changeProvince($event)"
            >
            </ng-select>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('provinceId').errors?.required">
             {{'COMMON.PROVINCE_CITY' | translate}}{{'COMMON.NOT_BLANK' | translate}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="principalPhone">
              {{'MENU.SCHOOL.PRINCIPAL_PHONE' | translate}}
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="principalPhone" ng
                   aria-describedby="principalPhone"
                   placeholder="{{'COMMON.ENTER' | translate}} {{'MENU.SCHOOL.PRINCIPAL_PHONE' | translate|lowercase}}"
                   (blur)="onBlurEventRemoveAllSpace($event)"
                   [(ngModel)]="school.phonePrincipal"
                   [ngClass]="{'is-invalid': f.get('principalPhone').touched && f.get('principalPhone').invalid}"
                   id="principalPhone"/>
            <span class="cross-validation-error-message alert error_div"
                  [ngClass]="{'is-invalid': f.get('principalPhone').touched && f.get('principalPhone').invalid}"
                  *ngIf="schoolForm.get('principalPhone').errors?.maxlength">
              {{'AUTH.INPUT.PHONE' | translate}} {{'COMMON.MAX_LENGHT' | translate:'{length: 20}'}}
            </span>
            <span class="cross-validation-error-message alert error_div"
                  [ngClass]="{'is-invalid': f.get('principalPhone').touched && f.get('principalPhone').invalid}"
                  *ngIf="schoolForm.get('principalPhone').errors?.pattern">
              {{'AUTH.VALIDATION.INVALID_PHONE' | translate}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="levelShool">
              {{'MENU.SCHOOL.LEVEL' | translate}}
            </label>
            <!--<input type="text" class="form-control w-100 input-sm" formControlName="level" ng-->
            <!--aria-describedby="level"  [ngModel]="school.level"-->
            <!--[ngClass]="{'is-invalid': f.get('level').touched && f.get('level').invalid}"-->
            <!--id="level"/>-->
            <ng-select style="font-size: 12px!important;" [items]="listSchoolLevel" formControlName="levelShool"
                       bindLabel="name" bindValue="code" id="levelShool"
                       [searchable]="false" [clearable]="false" [(ngModel)]="school.levelShool">
            </ng-select>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="districtId">
              {{'COMMON.DISTRICT' | translate}}
            </label>
            <!--<input type="text" class="form-control w-100 input-sm" formControlName="district" ng-->
            <!--aria-describedby="district" placeholder="Nhập Quận, Huyện" -->
            <!--[ngModel]="school.districtId"-->
            <!--[ngClass]="{'is-invalid': f.get('district').touched && f.get('district').invalid}"-->
            <!--id="district"/>-->
            <ng-select formControlName="districtId" [items]="listDistrict" [clearable]="false" id="districtId"
                       bindLabel="drNameEn" bindValue="drId" [(ngModel)]="school.districtId"
            >
            </ng-select>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="website">
              Website
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="website" ng
                   aria-describedby="website" placeholder="{{'COMMON.ENTER' | translate}} website"
                   [(ngModel)]="school.website"
                   [ngClass]="{'is-invalid': f.get('website').touched && f.get('website').invalid}"
                   (blur)="onBlurEventTrim($event)"
                   id="website"/>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('website').errors?.maxlength">
             Website {{'COMMON.MAX_LENGHT' | translate:'{length: 250}'}}
            </span>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="foundedDate">
              {{'MENU.SCHOOL.FOUNDED_DATE' | translate}}
            </label>
            <input type="date" class="form-control w-100 input-sm" formControlName="foundedDate" ng
                   aria-describedby="foundedDate" [(ngModel)]="school.foundedDate"
                   [ngClass]="{'is-invalid': f.get('foundedDate').touched && f.get('foundedDate').invalid}"
                   id="foundedDate"/>
          </div>
          <div class="col-md-4 col-sm-12 div-inline-grid-ct">
            <label for="address">
              {{'COMMON.ADDRESS' | translate}}
            </label>
            <input type="text" class="form-control w-100 input-sm" formControlName="address" ng
                   aria-describedby="address"
                   placeholder="{{'COMMON.ENTER' | translate}}{{'COMMON.ADDRESS' | translate|lowercase}}"
                   [(ngModel)]="school.address"
                   (blur)="onBlurEventTrim($event)"
                   [ngClass]="{'is-invalid': f.get('address').touched && f.get('address').invalid}"
                   id="address"/>
            <span class="text-left cross-validation-error-message alert error_div"
                  *ngIf="schoolForm.get('address').errors?.maxlength">
              {{'COMMON.ADDRESS' | translate}} {{'COMMON.MAX_LENGHT' | translate:'{length: 2000}'}}
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer m-auto text-center justify-content-center bottom-0 position-fixed footer-custom"
         id="footer">
      <button type="reset" class="btn  btn_cancel" *ngIf="isEdit"
              (click)="onUpdateOrCancel(0)">{{'COMMON.CANCEL' | translate}}
      </button>
      <button type="button" type="submit" class="btn  btn_send w-auto" *ngIf="isEdit"
              [disabled]="loading||overSize||schoolForm.invalid"
              (keyup.enter)="onSubmit()"> {{'COMMON.OK' | translate}}
        <!--<i class="position-absolute ml-10 mt-3 spinner spinner-right spinner-md spinner-light" *ngIf="loading"></i>-->
      </button>
      <button type="button" class="btn  btn-update" *ngIf="!isEdit" (click)="onUpdateOrCancel(0)">
        {{'COMMON.UPDATE' | translate}}
      </button>
    </div>
  </form>
</div>
